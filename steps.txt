# instalar k3d
curl -s https://raw.githubusercontent.com/k3d-io/k3d/main/install.sh | bash

# crear nodos
k3d cluster create mycluster \
  --servers 1 \
  --agents 2 \
  --port "8080:80@loadbalancer" \
  --k3s-arg "--disable=traefik@server:0" \
  --k3s-node-label "node-role.kubernetes.io/worker=worker@agent:0,1"

#a√±adir workers
k3d node create mycluster-agent-2 --cluster mycluster --role agent
kubectl label node k3d-mycluster-agent-2 node-role.kubernetes.io/worker=worker

#helm repos
# Install Spark-operator
helm repo add spark-kubernetes-operator https://apache.github.io/spark-kubernetes-operator/
helm install my-spark-kubernetes-operator spark-kubernetes-operator/spark-kubernetes-operator --version 1.4.0 -n spark

# Install both CRDs and KubeRay operator v1.5.1.
helm repo add kuberay https://ray-project.github.io/kuberay-helm/
helm install kuberay-operator kuberay/kuberay-operator --version 1.5.1 -n ray


